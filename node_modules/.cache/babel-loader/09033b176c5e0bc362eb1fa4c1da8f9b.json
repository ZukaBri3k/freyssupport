{"ast":null,"code":"import _asyncToGenerator from\"D:/ForumProject/freyssupport/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/ForumProject/freyssupport/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\ForumProject\\\\freyssupport\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useContext}from\"react\";import{useRef}from\"react\";import{UserContext}from\"../context/UserContext\";import{useNavigate}from\"react-router-dom\";import\"./html/signin/assets/css/signin.css\";import\"./html/signin/assets/bootstrap/css/bootstrap.min.css\";import NavBar from\"../components/NavBar\";import Footer from\"./html/footer/footer/Footer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SignIn(){var _useContext=useContext(UserContext),currentUser=_useContext.currentUser,signIn=_useContext.signIn;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),validation=_useState2[0],setValidation=_useState2[1];var navigate=useNavigate();var inputs=useRef([]);var addInput=function addInput(el){if(el&&!inputs.current.includes(el)){//récupère tous les inputs\ninputs.current.push(el);}};var formRef=useRef();var handleForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var email,pwd,cred;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();//console.log(\"PRIVATE\", currentUser.email);\n_context.prev=1;email=inputs.current[0].value;pwd=inputs.current[1].value;_context.next=6;return signIn(email,pwd);case 6:cred=_context.sent;//attend une réponse de la requete signUp dans UserContext\nformRef.current.reset();//console.log(cred.user.email);\nnavigate(\"/private/account/\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);setValidation(\"L'identifiant ou le mot de passe est incorrect\");case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function handleForm(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"section\",{className:\"d-xl-flex align-items-xl-start register-photo\",style:{background:\"rgb(33,88,116)\",marginBottom:\"1px\",marginRight:\"0px\",marginTop:\"140px\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"form-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleForm,ref:formRef,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center d-xl-flex justify-content-xl-center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Connectez vous \\xE0 votre compte\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"email\",name:\"email\",placeholder:\"Email\",ref:addInput,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"password\",name:\"password\",placeholder:\"Password\",ref:addInput,required:true})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger mt-1\",children:validation}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary d-block w-100\",type:\"submit\",style:{background:\"rgb(33,88,116)\"},children:\"Se connecter\\xA0\"})}),/*#__PURE__*/_jsx(\"a\",{className:\"already\",href:\"/signup\",children:\"Vous n'avez pas de compte ? Cr\\xE9ez en un maintenant !\"})]})})}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"sources":["D:/ForumProject/freyssupport/src/pages/SignIn.js"],"names":["React","useState","useContext","useRef","UserContext","useNavigate","NavBar","Footer","SignIn","currentUser","signIn","validation","setValidation","navigate","inputs","addInput","el","current","includes","push","formRef","handleForm","e","preventDefault","email","value","pwd","cred","reset","background","marginBottom","marginRight","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { UserContext } from \"../context/UserContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./html/signin/assets/css/signin.css\";\r\nimport \"./html/signin/assets/bootstrap/css/bootstrap.min.css\";\r\nimport NavBar from \"../components/NavBar\";\r\nimport Footer from \"./html/footer/footer/Footer\";\r\n\r\nexport default function SignIn() {\r\n  const { currentUser, signIn } = useContext(UserContext);\r\n  const [validation, setValidation] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const inputs = useRef([]);\r\n  const addInput = (el) => {\r\n    if (el && !inputs.current.includes(el)) {\r\n      //récupère tous les inputs\r\n      inputs.current.push(el);\r\n    }\r\n  };\r\n\r\n  const formRef = useRef();\r\n\r\n  const handleForm = async (e) => {\r\n    e.preventDefault();\r\n\r\n    //console.log(\"PRIVATE\", currentUser.email);\r\n\r\n    try {\r\n      const email = inputs.current[0].value;\r\n      const pwd = inputs.current[1].value;\r\n      const cred = await signIn(email, pwd); //attend une réponse de la requete signUp dans UserContext\r\n      formRef.current.reset();\r\n      //console.log(cred.user.email);\r\n      navigate(\"/private/account/\");\r\n    } catch {\r\n      setValidation(\"L'identifiant ou le mot de passe est incorrect\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <NavBar />\r\n      <section\r\n        className=\"d-xl-flex align-items-xl-start register-photo\"\r\n        style={{\r\n          background: \"rgb(33,88,116)\",\r\n          marginBottom: \"1px\",\r\n          marginRight: \"0px\",\r\n          marginTop: \"140px\",\r\n        }}\r\n      >\r\n        <div className=\"form-container\">\r\n          <form onSubmit={handleForm} ref={formRef}>\r\n            <h2 className=\"text-center d-xl-flex justify-content-xl-center\">\r\n              <strong>Connectez vous à votre compte</strong>\r\n            </h2>\r\n            <div className=\"mb-3\">\r\n              <input\r\n                className=\"form-control\"\r\n                type=\"email\"\r\n                name=\"email\"\r\n                placeholder=\"Email\"\r\n                ref={addInput}\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <input\r\n                className=\"form-control\"\r\n                type=\"password\"\r\n                name=\"password\"\r\n                placeholder=\"Password\"\r\n                ref={addInput}\r\n                required\r\n              />\r\n            </div>\r\n            <p className=\"text-danger mt-1\">{validation}</p>\r\n            <div className=\"mb-3\">\r\n              <button\r\n                className=\"btn btn-primary d-block w-100\"\r\n                type=\"submit\"\r\n                style={{\r\n                  background: \"rgb(33,88,116)\",\r\n                }}\r\n              >\r\n                Se connecter \r\n              </button>\r\n            </div>\r\n            <a className=\"already\" href=\"/signup\">\r\n              Vous n'avez pas de compte ? Créez en un maintenant !\r\n            </a>\r\n          </form>\r\n        </div>\r\n      </section>\r\n      <Footer />\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}